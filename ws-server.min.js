const http=require("http"),WebSocket=require("ws"),chokidar=require("chokidar"),server=http.createServer(),wss=new WebSocket.Server({server:server});function broadcast(e){wss.clients.forEach((r=>{r.readyState===WebSocket.OPEN&&r.send(JSON.stringify(e))}))}const watcher=chokidar.watch("dealerships",{persistent:!0,ignoreInitial:!0});watcher.on("change",(e=>{console.log(`File changed: ${e}`),broadcast({type:"file-changed",path:e})})),watcher.on("error",(e=>{console.error(`Watcher error: ${e}`)})),server.listen(2020,(()=>{console.log("WebSocket server listening on ws://localhost:2020")}));